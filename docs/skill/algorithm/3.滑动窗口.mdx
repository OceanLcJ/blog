---
id: sliding-window
slug: /algorithm/sliding-window
title: æ»‘åŠ¨çª—å£
authors: kuizuo
tags: [algorithm, sliding-window]
keywords: [algorithm, sliding-window]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## [æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)

> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ **æœ€é•¿å­ä¸²** çš„é•¿åº¦ã€‚
>
> **ç¤ºä¾‹ 1:**
>
> ```
> è¾“å…¥: s = "abcabcbb"
> è¾“å‡º: 3 
> è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
> ```
>
> **ç¤ºä¾‹ 2:**
>
> ```
> è¾“å…¥: s = "bbbbb"
> è¾“å‡º: 1
> è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚
> ```
>
> **ç¤ºä¾‹ 3:**
>
> ```
> è¾“å…¥: s = "pwwkew"
> è¾“å‡º: 3
> è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
>      è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ"pwke" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚
> ```

```js
var lengthOfLongestSubstring = function (s) {
  const counter = {}
  let ans = 0
  let left = 0

  for (let right in s) {
    counter[s[right]] = (counter[s[right]] || 0) + 1

    while (counter[s[right]] > 1) {
      counter[s[left]] -= 1
      left++
    }

    ans = Math.max(ans, right - left + 1)
  }

  return ans
}
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


<Tabs>
  <TabItem value="apple" label="Apple" default>
    This is an apple ğŸ
  </TabItem>
  <TabItem value="orange" label="Orange">
    This is an orange ğŸŠ
  </TabItem>
  <TabItem value="banana" label="Banana">
    This is a banana ğŸŒ
  </TabItem>
</Tabs>

æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆåˆ†åˆ«ä¼šéå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£)ï¼Œå…¶ä¸­ Î£ è¡¨ç¤ºå­—ç¬¦é›†ï¼ˆå³å­—ç¬¦ä¸²ä¸­å¯ä»¥å‡ºç°çš„å­—ç¬¦ï¼‰ã€‚

## [é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode.cn/problems/minimum-size-subarray-sum)

> ç»™å®šä¸€ä¸ªå«æœ‰ `n` ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° `target` **ã€‚**
>
> æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº `target` çš„é•¿åº¦æœ€å°çš„ **è¿ç»­å­æ•°ç»„** `[numsl, numsl+1, ..., numsr-1, numsr]` ï¼Œå¹¶è¿”å›å…¶é•¿åº¦**ã€‚**å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› `0` ã€‚
>
> **ç¤ºä¾‹ 1ï¼š**
>
> ```
> è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]
> è¾“å‡ºï¼š2
> è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
> è¾“å…¥ï¼štarget = 4, nums = [1,4,4]
> è¾“å‡ºï¼š1
> ```
>
> **ç¤ºä¾‹ 3ï¼š**
>
> ```
> è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]
> è¾“å‡ºï¼š0
> ```

```js
var minSubArrayLen = function (target, nums) {
  let ans = Infinity
  let sum = 0
  let left = 0

  for (let right in nums) {
    sum += nums[right]

    while (sum >= target) {
      ans = Math.min(ans, right - left + 1)
      sum -= nums[left]
      left++
    }
  }

  return ans <= nums.length ? ans : 0
}
```

## [ä¹˜ç§¯å°äº K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-product-less-than-k)

> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å­æ•°ç»„å†…æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¸¥æ ¼å°äº `k` çš„è¿ç»­å­æ•°ç»„çš„æ•°ç›®ã€‚
>
> **ç¤ºä¾‹ 1ï¼š**
>
> ```
> è¾“å…¥ï¼šnums = [10,5,2,6], k = 100
> è¾“å‡ºï¼š8
> è§£é‡Šï¼š8 ä¸ªä¹˜ç§¯å°äº 100 çš„å­æ•°ç»„åˆ†åˆ«ä¸ºï¼š[10]ã€[5]ã€[2],ã€[6]ã€[10,5]ã€[5,2]ã€[2,6]ã€[5,2,6]ã€‚
> éœ€è¦æ³¨æ„çš„æ˜¯ [10,5,2] å¹¶ä¸æ˜¯ä¹˜ç§¯å°äº 100 çš„å­æ•°ç»„ã€‚
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
> è¾“å…¥ï¼šnums = [1,2,3], k = 0
> è¾“å‡ºï¼š0
> ```

```js
var numSubarrayProductLessThanK = function (nums, k) {
    if (k <= 1) return 0

    let left = 0
    let count = 0
    let product = 1

    for (let right = 0; right < nums.length; right++) {
        product *= nums[right]

        while (product >= k) {
            product /= nums[left]
            left++
        }

        count += right - left + 1
    }

    return count
};
```

## [æœ€å°è¦†ç›–å­ä¸²](https://leetcode.cn/problems/minimum-window-substring)

> ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ã€ä¸€ä¸ªå­—ç¬¦ä¸² `t` ã€‚è¿”å› `s` ä¸­æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ `s` ä¸­ä¸å­˜åœ¨æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² `""` ã€‚
>
> **æ³¨æ„ï¼š**
>
> - å¯¹äº `t` ä¸­é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„å­å­—ç¬¦ä¸²ä¸­è¯¥å­—ç¬¦æ•°é‡å¿…é¡»ä¸å°‘äº `t` ä¸­è¯¥å­—ç¬¦æ•°é‡ã€‚
> - å¦‚æœ `s` ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚
>
> **ç¤ºä¾‹ 1ï¼š**
>
> ```
> è¾“å…¥ï¼šs = "ADOBECODEBANC", t = "ABC"
> è¾“å‡ºï¼š"BANC"
> è§£é‡Šï¼šæœ€å°è¦†ç›–å­ä¸² "BANC" åŒ…å«æ¥è‡ªå­—ç¬¦ä¸² t çš„ 'A'ã€'B' å’Œ 'C'ã€‚
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
> è¾“å…¥ï¼šs = "a", t = "a"
> è¾“å‡ºï¼š"a"
> è§£é‡Šï¼šæ•´ä¸ªå­—ç¬¦ä¸² s æ˜¯æœ€å°è¦†ç›–å­ä¸²ã€‚
> ```
>
> **ç¤ºä¾‹ 3:**
>
> ```
> è¾“å…¥: s = "a", t = "aa"
> è¾“å‡º: ""
> è§£é‡Š: t ä¸­ä¸¤ä¸ªå­—ç¬¦ 'a' å‡åº”åŒ…å«åœ¨ s çš„å­ä¸²ä¸­ï¼Œ
> å› æ­¤æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­å­—ç¬¦ä¸²ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚
> ```

```js
function minWindow(s, t) {
  const charCount = new Map()
  let left = 0,
    minLen = Infinity,
    minWindowStart = 0,
    charsToMatch = t.length

  // åˆå§‹åŒ–å­—ç¬¦è®¡æ•°
  for (const char of t) {
    charCount.set(char, (charCount.get(char) || 0) + 1)
  }

  for (let right = 0; right < s.length; right++) {
    const rightChar = s[right]

    if (charCount.has(rightChar) && charCount.get(rightChar) > 0) {
      charsToMatch--
    }

    charCount.set(rightChar, (charCount.get(rightChar) || 0) - 1)

    // ç¼©å°å·¦çª—å£
    while (charsToMatch === 0) {
      if (right - left + 1 < minLen) {
        minLen = right - left + 1
        minWindowStart = left
      }

      const leftChar = s[left]
      charCount.set(leftChar, (charCount.get(leftChar) || 0) + 1)

      if (charCount.get(leftChar) > 0) {
        charsToMatch++
      }

      left++
    }
  }

  return minLen === Infinity ? '' : s.substr(minWindowStart, minLen)
}
```
